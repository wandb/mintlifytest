---
- title: Feedback
- description: UIã¨SDKã‚’é€šã˜ã¦LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åé›†ãŠã‚ˆã³åˆ†æã™ã‚‹
---

LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŠ¹ç‡çš„ã«è©•ä¾¡ã™ã‚‹ã«ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åé›†ãƒ»åˆ†æã™ã‚‹ãŸã‚ã®å …ç‰¢ãªãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ã€‚Weaveã¯çµ±åˆã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒUIã‚’é€šã˜ã¦ç›´æ¥ã€ã¾ãŸã¯SDKã‚’ä»‹ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ã«ã‚³ãƒ¼ãƒ«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã€æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ãªã©ã€ã•ã¾ã–ã¾ãªã‚¿ã‚¤ãƒ—ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€ãƒãƒ¼ãƒ ã¯ä»¥ä¸‹ã®ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ï¼š

* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®ãŸã‚ã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã€‚
* LLMã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å•é¡Œã‚’åŠ¹æœçš„ã«ç‰¹å®šã—è§£æ±ºã™ã‚‹ã€‚
* å¾®èª¿æ•´ãªã©ã®é«˜åº¦ãªã‚¿ã‚¹ã‚¯ã®ãŸã‚ã®ä¾‹ã‚’åé›†ã™ã‚‹ã€‚

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€UIã¨SDKã®ä¸¡æ–¹ã§Weaveã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚¯ã‚¨ãƒªã¨ç®¡ç†ã€ãŠã‚ˆã³è©³ç´°ãªè©•ä¾¡ã®ãŸã‚ã®äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

* [UIã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã™ã‚‹](#provide-feedback-in-the-ui)
* [SDKã‚’é€šã˜ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã™ã‚‹](#provide-feedback-via-the-sdk)
* [äººé–“ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹](#add-human-annotations)

## UIã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã™ã‚‹

Weave UIã§ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ãŠã‚ˆã³è¡¨ç¤ºã§ãã¾ã™[ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰](#from-the-call-details-page) ã¾ãŸã¯ [ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ã—ã¦](#use-the-icons)ã€‚

### ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€**Traces**ã«ç§»å‹•ã—ã¾ã™ã€‚
2. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ã—ãŸã„ã‚³ãƒ¼ãƒ«ã®è¡Œã‚’è¦‹ã¤ã‘ã¾ã™ã€‚
3. ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¾ã™ã€‚
4. ã‚³ãƒ¼ãƒ«ã®**Feedback**åˆ—ã‚’é¸æŠã—ã¾ã™ã€‚
5. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®è¿½åŠ ã€è¡¨ç¤ºã€ã¾ãŸã¯å‰Šé™¤ï¼š
   * *[ã‚³ãƒ¼ãƒ«è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ“ãƒ¥ãƒ¼ã®å³ä¸Šéš…ã«ã‚ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ãŠã‚ˆã³è¡¨ç¤ºã—ã¾ã™](#use-the-icons)*ã€‚
   * *ã‚³ãƒ¼ãƒ«è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¡¨ç¤ºãŠã‚ˆã³å‰Šé™¤ã—ã¾ã™ã€‚*&#x9069;åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡Œã®ä¸€ç•ªå³ã®åˆ—ã«ã‚ã‚‹ã‚´ãƒŸç®±ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

![Screenshot of Feedback tab in call details](imgs/feedback_tab.png)

### ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹

ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã¨å€‹ã€…ã®ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã®ä¸¡æ–¹ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½åŠ ã‚„å‰Šé™¤ã€ãƒ¡ãƒ¢ã®è¿½åŠ ãŒã§ãã¾ã™ã€‚

* *ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«*ï¼šã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã®é©åˆ‡ãªè¡Œã®**Feedback**åˆ—ã«ã‚ã‚Šã¾ã™ã€‚
* *ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸*ï¼šå„ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã®å³ä¸Šéš…ã«ã‚ã‚Šã¾ã™ã€‚

ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ï¼š

1. çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
2. ã‚µãƒ ã‚ºã‚¢ãƒƒãƒ—ã€ã‚µãƒ ã‚ºãƒ€ã‚¦ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã‹ã€**+**&#x30A2;ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚ˆã‚Šå¤šãã®çµµæ–‡å­—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ï¼š

1. å‰Šé™¤ã—ãŸã„çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¾ã™ã€‚
2. ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å‰Šé™¤ã—ã¾ã™ã€‚

> ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã®[**Feedback**åˆ—ã‹ã‚‰ã‚‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚](#from-the-call-details-page)ã€‚

ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã«ã¯ï¼š

1. ã‚³ãƒ¡ãƒ³ãƒˆãƒãƒ–ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
2. ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã«ãƒ¡ãƒ¢ã‚’è¿½åŠ ã—ã¾ã™ã€‚
3. ãƒ¡ãƒ¢ã‚’ä¿å­˜ã™ã‚‹ã«ã¯ã€**Enter**ã‚­ãƒ¼ã‚’æŠ¼ã—ã¾ã™ã€‚è¿½åŠ ã®ãƒ¡ãƒ¢ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

<Warning>
  ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã®æœ€å¤§æ–‡å­—æ•°ã¯1024æ–‡å­—ã§ã™ã€‚ãƒãƒ¼ãƒˆãŒã“ã®åˆ¶é™ã‚’è¶…ãˆã‚‹ã¨ã€ä½œæˆã•ã‚Œã¾ã›ã‚“ã€‚
</Warning>

![Screenshot of calls grid with feedback column](imgs/feedback_calls.png)

## SDKã‚’é€šã˜ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã™ã‚‹

> UIã§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®SDKä½¿ç”¨ä¾‹ã¯ã€ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã®**Use**ã‚¿ãƒ–ã§ç¢ºèªã§ãã¾ã™ã€‚

Weave SDKã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§è¿½åŠ ã€å‰Šé™¤ã€ã‚¯ã‚¨ãƒªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚¯ã‚¨ãƒªã™ã‚‹

SDKã‚’ä½¿ç”¨ã—ã¦Weaveãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚¯ã‚¨ãƒªã§ãã¾ã™ã€‚SDKã¯ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¯ã‚¨ãƒªæ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

* `client.get_feedback()`ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿”ã—ã¾ã™ã€‚
* `client.get_feedback("<feedback_uuid>")`ï¼šç‰¹å®šã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’`<feedback_uuid>`ã§æŒ‡å®šã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨ã—ã¦è¿”ã—ã¾ã™ã€‚
* `client.get_feedback(reaction="<reaction_type>")`ï¼šç‰¹å®šã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ã®ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

ã¾ãŸã€`client.get_feedback()`ã®å„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è¿½åŠ æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ï¼š

* `id`ï¼šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDã€‚
* `created_at`ï¼šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆæ™‚é–“æƒ…å ±ã€‚
* `feedback_type`ï¼šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚¿ã‚¤ãƒ—ï¼ˆãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ãƒãƒ¼ãƒˆã€ã‚«ã‚¹ã‚¿ãƒ ï¼‰ã€‚
* `payload`ï¼šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰

<Tabs>
  <Tab title="Python">
    ```python
    import weave
    client = weave.init('intro-example')

    # Get all feedback in a project
    all_feedback = client.get_feedback()

    # Fetch a specific feedback object by id.
    # The API returns a collection, which is expected to contain at most one item.
    one_feedback = client.get_feedback("<feedback_uuid>")[0]

    # Find all feedback objects with a specific reaction. You can specify offset and limit.
    thumbs_up = client.get_feedback(reaction="ğŸ‘", limit=10)

    # After retrieval, view the details of individual feedback objects.
    for f in client.get_feedback():
        print(f.id)
        print(f.created_at)
        print(f.feedback_type)
        print(f.payload)
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

### ã‚³ãƒ¼ãƒ«ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹

ã‚³ãƒ¼ãƒ«ã®UUIDã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ«ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ã§ãã¾ã™ã€‚UUIDã‚’ä½¿ç”¨ã—ã¦ç‰¹å®šã®ã‚³ãƒ¼ãƒ«ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€[ã‚³ãƒ¼ãƒ«å®Ÿè¡Œä¸­ã¾ãŸã¯å®Ÿè¡Œå¾Œã«å–å¾—ã—ã¾ã™](#retrieve-the-call-uuid)ã€‚SDKã¯ã‚³ãƒ¼ãƒ«ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¿½åŠ ã«é–¢ã—ã¦ä»¥ä¸‹ã®æ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

* `call.feedback.add_reaction("<reaction_type>")`ï¼šã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹`<reaction_types>`ï¼ˆçµµæ–‡å­—ï¼‰ã®1ã¤ã‚’è¿½åŠ ã—ã¾ã™ã€ä¾‹ãˆã°ğŸ‘ãªã©ã€‚
* `call.feedback.add_note("<note>")`ï¼šãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚
* `call.feedback.add("<label>", <object>)`ï¼šã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯`<object>`ã‚’`<label>`ã§æŒ‡å®šã—ã¦è¿½åŠ ã—ã¾ã™ã€‚

<Warning>
  ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã®æœ€å¤§æ–‡å­—æ•°ã¯1024æ–‡å­—ã§ã™ã€‚ãƒãƒ¼ãƒˆãŒã“ã®åˆ¶é™ã‚’è¶…ãˆã‚‹ã¨ã€ä½œæˆã•ã‚Œã¾ã›ã‚“ã€‚
</Warning>

<Tabs>
  <Tab title="Python">
    ```python
    import weave
    client = weave.init('intro-example')

    call = client.get_call("<call_uuid>")

    # Adding an emoji reaction
    call.feedback.add_reaction("ğŸ‘")

    # Adding a note
    call.feedback.add_note("this is a note")

    # Adding custom key/value pairs.
    # The first argument is a user-defined "type" string.
    # Feedback must be JSON serializable and less than 1 KB when serialized.
    call.feedback.add("correctness", { "value": 5 })
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

#### ã‚³ãƒ¼ãƒ«UUIDã‚’å–å¾—ã™ã‚‹

ã‚³ãƒ¼ãƒ«ç›´å¾Œã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚·ãƒŠãƒªã‚ªã§ã¯ã€ã‚³ãƒ¼ãƒ«å®Ÿè¡Œä¸­ã¾ãŸã¯å®Ÿè¡Œå¾Œã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚³ãƒ¼ãƒ«UUIDã‚’å–å¾—ã§ãã¾ã™ã€‚

* [ã‚³ãƒ¼ãƒ«å®Ÿè¡Œä¸­](#during-call-execution)
* [ã‚³ãƒ¼ãƒ«å®Ÿè¡Œå¾Œ](#after-call-execution)

##### ã‚³ãƒ¼ãƒ«å®Ÿè¡Œä¸­

ã‚³ãƒ¼ãƒ«å®Ÿè¡Œä¸­ã«UUIDã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ç¾åœ¨ã®ã‚³ãƒ¼ãƒ«ã‚’å–å¾—ã—ã€IDã‚’è¿”ã—ã¾ã™ã€‚

<Tabs>
  <Tab title="Python">
    ```python

    import weave
    weave.init("uuid")

    @weave.op()
    def simple_operation(input_value):
        # Perform some simple operation
        output = f"Processed {input_value}"
        # Get the current call ID
        current_call = weave.require_current_call()
        call_id = current_call.id
        return output, call_id
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

##### ã‚³ãƒ¼ãƒ«å®Ÿè¡Œå¾Œ

ã‚ã‚‹ã„ã¯ã€`call()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦æ“ä½œã‚’å®Ÿè¡Œã—ã€ã‚³ãƒ¼ãƒ«å®Ÿè¡Œå¾Œã«IDã‚’å–å¾—ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

<Tabs>
  <Tab title="Python">
    ```python
    import weave
    weave.init("uuid")

    @weave.op()
    def simple_operation(input_value):
        return f"Processed {input_value}"

    # Execute the operation and retrieve the result and call ID
    result, call = simple_operation.call("example input")
    call_id = call.id
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

### ã‚³ãƒ¼ãƒ«ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å‰Šé™¤ã™ã‚‹

UUIDã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®ã‚³ãƒ¼ãƒ«ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚

<Tabs>
  <Tab title="Python">
    ```python
    call.feedback.purge("<feedback_uuid>")
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

## äººé–“ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹

äººé–“ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯Weave UIã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚äººé–“ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã«ã¯ã€ã¾ãš[UI](#create-a-human-annotation-scorer-in-the-ui)ã¾ãŸã¯[API](#create-a-human-annotation-scorer-using-the-api)ã‚’ä½¿ç”¨ã—ã¦äººé–“ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®å¾Œã€[UIã§ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„](#use-the-human-annotation-scorer-in-the-ui)ã€[APIã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹](#modify-a-human-annotation-scorer-using-the-api)ã“ã¨ãŒã§ãã¾ã™ã€‚

### UIã§äººé–“ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹

UIã§äººé–“ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€æ¬¡ã®æ‰‹é †ã«å¾“ã„ã¾ã™ï¼š

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€**Scorers**ã«ç§»å‹•ã—ã¾ã™ã€‚
2. å³ä¸Šéš…ã§ã€**+ Create scorer**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
3. è¨­å®šãƒšãƒ¼ã‚¸ã§ã€ä»¥ä¸‹ã‚’è¨­å®šã—ã¾ã™ï¼š
   * `Scorer type`ã‚’`Human annotation`
   * `Name`
   * `Description`
   * `Type`ã«è¨­å®šã—ã¾ã™ã€‚ã“ã‚Œã¯åé›†ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚¿ã‚¤ãƒ—ã‚’æ±ºå®šã—ã¾ã™ã€‚ä¾‹ãˆã°`boolean`ã‚„`integer`ãªã©ã§ã™ã€‚
4. **Create scorer**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚ã“ã‚Œã§[ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†](#use-the-human-annotation-scorer-in-the-ui)ã“ã¨ãŒã§ãã¾ã™ã€‚

æ¬¡ã®ä¾‹ã§ã¯ã€äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚¿ãƒ¼ã¯LLMãŒå–ã‚Šè¾¼ã‚“ã ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã™ã‚‹ã‚ˆã†æ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã‚¹ã‚³ã‚¢è¨­å®šã®ãŸã‚ã«é¸æŠã•ã‚ŒãŸ`Type`ã¯ã€å¯èƒ½ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’å«ã‚€`enum`ã§ã™ã€‚

![Human Annotation scorer form](./imgs/human-annotation-scorer-form.png)

### UIã§äººé–“ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹

[äººé–“ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆ](#create-a-human-annotation-scorer-in-the-ui)ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«**Feedback** ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¨­å®šã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€æ¬¡ã®æ‰‹é †ã«å¾“ã„ã¾ã™ï¼š

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€æ¬¡ã«ç§»å‹•ã—ã¾ã™ **Traces**

2. äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸã„ã‚³ãƒ¼ãƒ«ã®è¡Œã‚’è¦‹ã¤ã‘ã¾ã™ã€‚

3. ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¾ã™ã€‚

4. å³ä¸Šéš…ã§ã€**Show feedback** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

   ![Marker icon in call header](./imgs/marker-icon.png)

   åˆ©ç”¨å¯èƒ½ãªäººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ãŒã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

   ![Human Annotation scorer feedback sidebar](./imgs/full-feedback-sidebar.png)

5. ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚

6. ã‚¯ãƒªãƒƒã‚¯ **Save**ã€‚

7. ã‚³ãƒ¼ãƒ«è©³ç´°ãƒšãƒ¼ã‚¸ã§ã€**Feedback** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚æ–°ã—ã„ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã¾ãŸã€**Annotations** åˆ—ã§ **Traces** ã®ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

   > æœ€æ–°ã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

![Human Annotation scorer feedback in calls table](./imgs/feedback-in-the-table.png)

### APIã‚’ä½¿ç”¨ã—ã¦äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹

äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã¯APIã‚’é€šã˜ã¦ã‚‚ä½œæˆã§ãã¾ã™ã€‚å„ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã¯ç‹¬è‡ªã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Šã€ç‹¬ç«‹ã—ã¦ä½œæˆãŠã‚ˆã³æ›´æ–°ã•ã‚Œã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€æ¬¡ã®æ‰‹é †ã«å¾“ã„ã¾ã™ï¼š

1. ã‚¤ãƒ³ãƒãƒ¼ãƒˆ `AnnotationSpec` ã‚¯ãƒ©ã‚¹ã‚’ `weave.flow.annotation_spec`
2. ä½¿ç”¨ `publish` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ `weave` ã‹ã‚‰ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

æ¬¡ã®ä¾‹ã§ã¯ã€2ã¤ã®ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€åˆã®ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã€`Temperature`ã¯ã€LLMã‚³ãƒ¼ãƒ«ã®çŸ¥è¦šæ¸©åº¦ã‚’ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚2ç•ªç›®ã®ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã€`Tone`ã¯ã€LLMãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒˆãƒ¼ãƒ³ã‚’ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚å„ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã¯`save`ã‚’ä½¿ç”¨ã—ã¦é–¢é€£ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDï¼ˆ`temperature-scorer`ã¨`tone-scorer`ï¼‰ã§ä½œæˆã•ã‚Œã¾ã™ã€‚

<Tabs>
  <Tab title="Python">
    ```python
    import weave
    from weave.flow.annotation_spec import AnnotationSpec

    client = weave.init("feedback-example")

    spec1 = AnnotationSpec(
      name="Temperature",
      description="The perceived temperature of the llm call",
      field_schema={
        "type": "number",
        "minimum": -1,
        "maximum": 1,
      }
    )
    spec2 = AnnotationSpec(
      name="Tone",
      description="The tone of the llm response",
      field_schema={
        "type": "string",
        "enum": ["Aggressive", "Neutral", "Polite", "N/A"],
      },
    )
    weave.publish(spec1, "temperature-scorer")
    weave.publish(spec2, "tone-scorer")
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

### APIã‚’ä½¿ç”¨ã—ã¦äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹

æ‹¡å¼µã—ã¦ [APIã‚’ä½¿ç”¨ã—ã¦äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹](#create-a-human-annotation-scorer-using-the-api)ã€æ¬¡ã®ä¾‹ã§ã¯å…ƒã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDï¼ˆ`Temperature`ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã®æ›´æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚`temperature-scorer`ï¼‰ã‚’`publish`ã§ä½¿ç”¨ã—ã¾ã™ã€‚çµæœã¯ã€ã™ã¹ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å±¥æ­´ã‚’æŒã¤æ›´æ–°ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

> äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å±¥æ­´ã¯**Scorers**ã‚¿ãƒ–ã®**Human annotations**ã§ç¢ºèªã§ãã¾ã™ã€‚

<Tabs>
  <Tab title="Python">
    ```python
    import weave
    from weave.flow.annotation_spec import AnnotationSpec

    client = weave.init("feedback-example")

    # create a new version of the scorer
    spec1 = AnnotationSpec(
      name="Temperature",
      description="The perceived temperature of the llm call",
      field_schema={
        "type": "integer",  # <<- change type to integer
        "minimum": -1,
        "maximum": 1,
      }
    )
    weave.publish(spec1, "temperature-scorer")
    ```
  </Tab>

  <Tab title="TypeScript">
    ```plaintext
    This feature is not available in TypeScript yet.  Stay tuned!
    ```
  </Tab>
</Tabs>

![Human Annotation scorer history](./imgs/human-annotation-scorer-history.png)

### APIã‚’ä½¿ç”¨ã—ã¦äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹

ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯APIã§ã¯ã€ç‰¹åˆ¥ã«æ§‹ç¯‰ã•ã‚ŒãŸåå‰ã¨`annotation_ref`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€äººé–“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚`annotation_spec_ref`ã¯ã€é©åˆ‡ãªã‚¿ãƒ–ã‚’é¸æŠã™ã‚‹ã‹ã€`AnnotationSpec`ã®ä½œæˆä¸­ã«UIã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚

<Tabs>
  <Tab title="Python">
    ```python
    import weave

    client = weave.init("feedback-example")

    call = client.get_call("<call_id>")
    annotation_spec = weave.ref("<annotation_spec_ref_uri>")

    call.feedback.add(
      feedback_type="wandb.annotation." + annotation_spec.name,
      payload={"value": 1},
      annotation_ref=annotation_spec.uri(),
    )
    ```
  </Tab>
</Tabs>
